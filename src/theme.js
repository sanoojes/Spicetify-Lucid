(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var T=Object.create,U=Object.defineProperty,D=Object.defineProperties,$=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,V=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,G=(e,t,a)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,o=(e,t)=>{for(var a in t=t||{})F.call(t,a)&&G(e,a,t[a]);if(n)for(var a of n(t))H.call(t,a)&&G(e,a,t[a]);return e},l=(e,t)=>D(e,j(t)),q=(e,t)=>{var a={};for(r in e)F.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&n)for(var r of n(e))t.indexOf(r)<0&&H.call(e,r)&&(a[r]=e[r]);return a},e=(e,t,a)=>(a=null!=e?T(V(e)):{},((t,a,r,n)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let e of z(a))F.call(t,e)||e===r||U(t,e,{get:()=>a[e],enumerable:!(n=$(a,e))||n.enumerable});return t})(!t&&e&&e.__esModule?a:U(a,"default",{value:e,enumerable:!0}),e)),r=(a=(e,t)=>function(){return t||(0,e[z(e)[0]])((t={exports:{}}).exports,t),t.exports})({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),J=a({"node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js"(e){function o(e){for(var t=arguments.length,a=new Array(1<t?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];var n="error",i=a,l=u.ReactDebugCurrentFrame.getStackAddendum();""!==l&&(e+="%s",i=i.concat([l])),(l=i.map(function(e){return String(e)})).unshift("Warning: "+e),Function.prototype.apply.call(console[n],console,l)}function s(e){var t=e.getSnapshot,e=e.value;try{var a=t();return!d(e,a)}catch(e){return 1}}var c,u,d,p,g,m,f,y,b,t;"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error),c=r(),u=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},p=c.useState,g=c.useEffect,m=c.useLayoutEffect,f=c.useDebugValue,b=y=!1,t=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),t=void 0!==c.useSyncExternalStore?c.useSyncExternalStore:!t?function(e,t,a){return t()}:function(e,t,a){y||void 0!==c.startTransition&&(y=!0,o("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var r=t(),n=(b||(n=t(),d(r,n))||(o("The result of getSnapshot should be cached to avoid an infinite loop"),b=!0),p({inst:{value:r,getSnapshot:t}})),i=n[0].inst,l=n[1];return m(function(){i.value=r,i.getSnapshot=t,s(i)&&l({inst:i})},[e,r,t]),g(function(){s(i)&&l({inst:i});return e(function(){s(i)&&l({inst:i})})},[e]),f(r),r},e.useSyncExternalStore=t,"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}}),W=a({"node_modules/use-sync-external-store/shim/index.js"(e,t){t.exports=J()}}),Z=a({"node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js"(e){var t,a,u,i,d,p,g,m;"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error),t=r(),a=W(),u="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,d=t.useRef,p=t.useEffect,g=t.useMemo,m=t.useDebugValue,e.useSyncExternalStoreWithSelector=function(e,a,l,o,s){var c,t=d(null);null===t.current?(c={hasValue:!1,value:null},t.current=c):c=t.current;var r=(t=g(function(){var r,n,i=!1,e=function(e){if(i)return t=n,u(r,e)||(a=o(e),void 0!==s&&s(t,a))?t:(r=e,n=a);i=!0;var t=o(r=e);if(void 0!==s&&c.hasValue){var a=c.value;if(s(a,t))return n=a}return n=t},t=void 0===l?null:l;return[function(){return e(a())},null===t?void 0:function(){return e(t())}]},[a,l,o,s]))[0],n=i(e,r,t[1]);return p(function(){c.hasValue=!0,c.value=n},[n]),m(n),n},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}}),t=a({"node_modules/use-sync-external-store/shim/with-selector.js"(e,t){t.exports=Z()}}),K=a({"node_modules/canvas/lib/parse-font.js"(e,t){var a=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,n=new RegExp("(bold|bolder|lighter|[1-9]00) +","i"),i=new RegExp("(italic|oblique) +","i"),l=new RegExp("(small-caps) +","i"),o=new RegExp("(ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded) +","i"),s=new RegExp(`([\\d\\.]+)(px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q) *((?:${a})( *, *(?:${a}))*)`),c={};t.exports=e=>{if(c[e])return c[e];var t=s.exec(e);if(t){var a,r={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(t[1]),unit:t[2],family:t[3].replace(/["']/g,"").replace(/ *, */g,",")},t=e.substring(0,t.index);switch((a=n.exec(t))&&(r.weight=a[1]),(a=i.exec(t))&&(r.style=a[1]),(a=l.exec(t))&&(r.variant=a[1]),(a=o.exec(t))&&(r.stretch=a[1]),r.unit){case"pt":r.size/=.75;break;case"pc":r.size*=16;break;case"in":r.size*=96;break;case"cm":r.size*=96/2.54;break;case"mm":r.size*=96/25.4;break;case"%":break;case"em":case"rem":r.size*=16/.75;break;case"q":r.size*=96/25.4/4}return c[e]=r}}}}),a=a({"node_modules/canvas/browser.js"(e){var t=K();e.parseFont=t,e.createCanvas=function(e,t){return Object.assign(document.createElement("canvas"),{width:e,height:t})},e.createImageData=function(e,t,a){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(e);case 2:return new ImageData(e,t);default:return new ImageData(e,t,a)}},e.loadImage=function(n,i){return new Promise(function(e,t){let a=Object.assign(document.createElement("img"),i);function r(){a.onload=null,a.onerror=null}a.onload=function(){r(),e(a)},a.onerror=function(){r(),t(new Error('Failed to load the image "'+n+'"'))},a.src=n})}}}),i=e(r()),X=i.default.memo(({title:e,children:t,headingChild:a,onClose:r,isOpen:n=!1})=>n?i.default.createElement("div",{className:"modal-container"},i.default.createElement("div",{className:"modal-overlay "+(n&&"open"),style:{zIndex:20},onClick:r}),i.default.createElement("dialog",{open:n,className:"modal-section "+(n&&"open"),"aria-label":e,"aria-modal":"true"},i.default.createElement("div",{className:"main-embedWidgetGenerator-container"},i.default.createElement("div",{className:"main-trackCreditsModal-header"},i.default.createElement("h1",{className:"main-type-alto"},e),a&&i.default.createElement("div",null,a),i.default.createElement("button",{type:"button","aria-label":"Close",className:"main-trackCreditsModal-closeBtn",onClick:()=>r()},i.default.createElement("svg",{width:"18",height:"18",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg"},i.default.createElement("title",null,"Close"),i.default.createElement("path",{d:"M31.098 29.794L16.955 15.65 31.097 1.51 29.683.093 15.54 14.237 1.4.094-.016 1.508 14.126 15.65-.016 29.795l1.414 1.414L15.54 17.065l14.144 14.143",fill:"currentColor","fill-rule":"evenodd"})))),i.default.createElement("div",{className:"modal-contents"},i.default.createElement("main",{className:"modal-wrapper"},t))))):null),s=e(r()),R=({title:e,description:t,children:a})=>s.default.createElement("div",{className:"setting-section"},s.default.createElement("div",{className:"heading-wrapper"},s.default.createElement("h3",{className:"title"},e),t&&s.default.createElement("p",{className:"description"},t)),a),Y=[{label:"Animated",value:"animated"},{label:"Static",value:"static"},{label:"Solid",value:"solid"}],Q=[{label:"Compact",value:"compact"},{label:"Default",value:"default"}],ee=[{label:"Starry",value:"starry"},{label:"Default",value:"default"},{label:"none",value:"none"}],te=[{label:"Now Playing",value:"now-playing"},{label:"Playlist Cover",value:"inherit"},{label:"none",value:"none"}],ae=[{label:"Card",value:"card"},{label:"Compact",value:"compact"},{label:"Default",value:"default"}],re=[{label:"None",value:"none"},{label:"Hidden",value:"hidden"},{label:"Dotted",value:"dotted"},{label:"Dashed",value:"dashed"},{label:"Solid",value:"solid"},{label:"Double",value:"double"},{label:"Groove",value:"groove"},{label:"Ridge",value:"ridge"},{label:"Inset",value:"inset"},{label:"Outset",value:"outset"}],ne=[{label:"Profile Context Menu",value:"context-menu"},{label:"Global Nav",value:"nav"}],ie={},le=e=>{let r,n=new Set;var t=(e,a)=>{e="function"==typeof e?e(r):e;if(!Object.is(e,r)){let t=r;r=(null!=a?a:"object"!=typeof e||null===e)?e:Object.assign({},r,e),n.forEach(e=>e(r,t))}},a=()=>r,i={setState:t,getState:a,getInitialState:()=>l,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{"production"!==(ie.env?ie.env.MODE:void 0)&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};let l=r=e(t,a,i);return i},oe=e=>e?le(e):le,c=e(r(),1),t=e(t(),1),se={},ce=c.default.useDebugValue,ue=t.default.useSyncExternalStoreWithSelector,de=!1,pe=e=>e,ge=e=>{"production"!==(se.env?se.env.MODE:void 0)&&"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let r="function"==typeof e?oe(e):e;e=(e,t)=>{return[e,t=pe,a]=[r,e,t],"production"!==(se.env?se.env.MODE:void 0)&&a&&!de&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),de=!0),e=ue(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,a),ce(e),e;var a};return Object.assign(e,r),e},c=e=>e?ge(e):ge,me={},y=a=>e=>{try{let t=a(e);return t instanceof Promise?t:{then(e){return y(e)(t)},catch(e){return this}}}catch(t){return{then(e){return this},catch(e){return y(e)(t)}}}},fe=(g,m)=>(a,r,e)=>{let n={storage:((e,a)=>{let r;try{r=e()}catch(e){return}return{getItem:e=>{var t=e=>null===e?null:JSON.parse(e,null==a?void 0:a.reviver),e=null!=(e=r.getItem(e))?e:null;return e instanceof Promise?e.then(t):t(e)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,null==a?void 0:a.replacer)),removeItem:e=>r.removeItem(e)}})(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...m},i=!1,l=new Set,o=new Set,s=n.storage;if(!s)return g((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),a(...e)},r,e);let c=()=>{var e=n.partialize({...r()});return s.setItem(n.name,{state:e,version:n.version})},u=e.setState,d=(e.setState=(e,t)=>{u(e,t),c()},g((...e)=>{a(...e),c()},r,e));e.getInitialState=()=>d;let p,t=()=>{var e;if(s){i=!1,l.forEach(e=>e(null!=(e=r())?e:d));let t=(null==(e=n.onRehydrateStorage)?void 0:e.call(n,null!=(e=r())?e:d))||void 0;return y(s.getItem.bind(s))(n.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===n.version)return[!1,e.state];if(n.migrate)return[!0,n.migrate(e.state,e.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var[e,t]=e;if(p=n.merge(t,null!=(t=r())?t:d),a(p,!0),e)return c()}).then(()=>{null!=t&&t(p,void 0),p=r(),i=!0,o.forEach(e=>e(p))}).catch(e=>{null!=t&&t(void 0,e)})}};return e.persist={setOptions:e=>{n={...n,...e},e.storage&&(s=e.storage)},clearStorage:()=>{null!=s&&s.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>t(),hasHydrated:()=>i,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},n.skipHydration||t(),p||d},t=(e,t)=>{var m,f;return"getStorage"in t||"serialize"in t||"deserialize"in t?("production"!==(me.env?me.env.MODE:void 0)&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),m=e,f=t,(a,r,e)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...f},i=!1,l=new Set,o=new Set,s;try{s=n.getStorage()}catch(e){}if(!s)return m((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),a(...e)},r,e);let c=y(n.serialize),u=()=>{var e=n.partialize({...r()});let t;e=c({state:e,version:n.version}).then(e=>s.setItem(n.name,e)).catch(e=>{t=e});if(t)throw t;return e},d=e.setState,p=(e.setState=(e,t)=>{d(e,t),u()},m((...e)=>{a(...e),u()},r,e)),g,t=()=>{var e;if(s){i=!1,l.forEach(e=>e(r()));let t=(null==(e=n.onRehydrateStorage)?void 0:e.call(n,r()))||void 0;return y(s.getItem.bind(s))(n.name).then(e=>{if(e)return n.deserialize(e)}).then(e=>{if(e)return"number"!=typeof e.version||e.version===n.version?e.state:n.migrate?n.migrate(e.state,e.version):void console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}).then(e=>(g=n.merge(e,null!=(e=r())?e:p),a(g,!0),u())).then(()=>{null!=t&&t(g,void 0),i=!0,o.forEach(e=>e(g))}).catch(e=>{null!=t&&t(void 0,e)})}};return e.persist={setOptions:e=>{n={...n,...e},e.getStorage&&(s=e.getStorage())},clearStorage:()=>{null!=s&&s.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>t(),hasHydrated:()=>i,onHydrate:e=>(l.add(e),()=>{l.delete(e)}),onFinishHydration:e=>(o.add(e),()=>{o.delete(e)})},t(),g||p}):fe(e,t)},ye={backgroundSettings:{mode:"animated",styles:{solid:{opacity:1,backgroundColor:"var(--spice-main)"},static:{blur:32,opacity:1,saturation:1.1,contrast:1.2,brightness:.6},animated:{blur:32,time:45,opacity:1,saturation:1.1,contrast:1.2,brightness:.6}},customBackgroundOverride:{url:null}},interfaceSettings:{fontSettings:{body:{url:"https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap",fontFamily:"Poppins"}},grainSettings:{grainEffect:"default"},pagesSettings:{isScrollMode:!1,backgroundImageMode:"inherit",playlistViewMode:"default"},borderSettings:{color:"rgba(var(--spice-rgb-text), 0.125)",style:"solid",thickness:1}},colorSettings:{isDynamicColor:!1},playbarSettings:{mode:"default",styles:{compact:{opacity:1,saturation:1.1,contrast:1.2,brightness:.8,borderRadius:8,backdropBlur:32,paddingX:6,backgroundColor:"rgba(var(--spice-rgb-card), 0.5)"},default:{opacity:1,paddingX:6,saturation:1.1,contrast:1.2,borderRadius:8,brightness:.8,backdropBlur:32,backgroundColor:"rgba(var(--spice-rgb-card), 0.5)"}}},settingAccessPosition:"context-menu"},be=e(r()),ve=()=>be.default.createElement("svg",{role:"img","aria-label":"dismiss",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},be.default.createElement("path",{d:"m4.21 4.387.083-.094a1 1 0 0 1 1.32-.083l.094.083L12 10.585l6.293-6.292a1 1 0 1 1 1.414 1.414L13.415 12l6.292 6.293a1 1 0 0 1 .083 1.32l-.083.094a1 1 0 0 1-1.32.083l-.094-.083L12 13.415l-6.293 6.292a1 1 0 0 1-1.414-1.414L10.585 12 4.293 5.707a1 1 0 0 1-.083-1.32l.083-.094-.083.094Z",fill:"#ffffff"})),he=e(r()),u=e=>{var{variant:t="primary",size:a="medium",icon:r,children:n}=e,e=q(e,["variant","size","icon","children"]);return he.default.createElement("button",o({className:`button button-${t} button-`+a},e),r&&he.default.createElement("span",{className:"button-icon"},r),n)},d=e(r()),Se=0,{ToastContainer:we,addToast:p}=(()=>{let a;return{ToastContainer:()=>{let[e,n]=(0,d.useState)([]);var t=(0,d.useCallback)((t,a=!1)=>{let r=Se++,e=(n(e=>[...e,{id:r,message:t,isError:a,exiting:!1}]),setTimeout(()=>{i(r)},3e3));return()=>clearTimeout(e)},[]);a=t;let i=t=>{n(e=>e.map(e=>e.id===t?l(o({},e),{exiting:!0}):e)),setTimeout(()=>{n(e=>e.filter(e=>e.id!==t))},500)};return d.default.createElement("div",{className:"toast-container"},e.map(e=>d.default.createElement("div",{key:e.id,className:"toast-element "+(e.exiting?"toast-exit":""),style:{backgroundColor:e.isError?"rgba(200,20,20,0.5)":"rgba(20,20,20,0.5)"}},e.message,d.default.createElement(u,{icon:d.default.createElement(ve,null),onClick:()=>i(e.id)}))))},addToast:(e,t)=>a(e,t)}})(),_=c(t((n,t)=>l(o({},ye),{exportSettings:()=>{var e=t();return JSON.stringify(e)},importSettings:t=>{try{var e=JSON.parse(t);if("object"==typeof(a=e)&&null!==a&&"backgroundSettings"in a&&"interfaceSettings"in a&&"playbarSettings"in a&&"colorSettings"in a&&"object"==typeof a.backgroundSettings&&"mode"in a.backgroundSettings&&"styles"in a.backgroundSettings&&"object"==typeof a.interfaceSettings&&"borderSettings"in a.interfaceSettings&&"fontSettings"in a.interfaceSettings&&"object"==typeof a.playbarSettings&&"mode"in a.playbarSettings&&"object"==typeof a.colorSettings&&"isDynamicColor"in a.colorSettings)return n(e),p("Settings imported successfully!"),!0;throw new Error("Invalid settings structure")}catch(e){t=e instanceof SyntaxError?"Failed to parse JSON: Please ensure your input is valid JSON.":e instanceof Error?e.message:"An unknown error occurred.";return p(t,!0),!1}var a},setBackgroundSettings:t=>n(e=>({backgroundSettings:o(o({},e.backgroundSettings),t)})),setSettingAccessPosition:e=>n(()=>({settingAccessPosition:e})),setCustomBackgroundOverride:t=>n(e=>({backgroundSettings:l(o({},e.backgroundSettings),{customBackgroundOverride:l(o({},e.backgroundSettings.customBackgroundOverride),{url:t})})})),setBorderColor:t=>n(e=>({interfaceSettings:l(o({},e.interfaceSettings),{borderSettings:l(o({},e.interfaceSettings.borderSettings),{color:t})})})),setBorderStyle:t=>n(e=>({interfaceSettings:l(o({},e.interfaceSettings),{borderSettings:l(o({},e.interfaceSettings.borderSettings),{style:t})})})),setBorderThickness:t=>n(e=>({interfaceSettings:l(o({},e.interfaceSettings),{borderSettings:l(o({},e.interfaceSettings.borderSettings),{thickness:t})})})),setBackgroundStyles:(t,a)=>n(e=>({backgroundSettings:l(o({},e.backgroundSettings),{styles:l(o({},e.backgroundSettings.styles),{[a]:o(o({},e.backgroundSettings.styles[a]),t)})})})),setColorSettings:t=>n(e=>({colorSettings:o(o({},e.colorSettings),t)})),setBorderSettings:t=>n(e=>({interfaceSettings:l(o({},e.interfaceSettings),{borderSettings:o(o({},e.interfaceSettings.borderSettings),t)})})),setPlaybarSettings:t=>n(e=>({playbarSettings:o(o({},e.playbarSettings),t)})),setInterfaceSettings:t=>n(e=>({interfaceSettings:o(o({},e.interfaceSettings),t)})),setBackgroundMode:t=>n(e=>({backgroundSettings:l(o({},e.backgroundSettings),{mode:t})})),updateBackgroundStyle:(t,a,r)=>n(e=>({backgroundSettings:l(o({},e.backgroundSettings),{styles:l(o({},e.backgroundSettings.styles),{[t]:l(o({},e.backgroundSettings.styles[t]),{[a]:r})})})})),setFont:(t,a)=>n(e=>({interfaceSettings:l(o({},e.interfaceSettings),{fontSettings:l(o({},e.interfaceSettings.fontSettings),{[t]:o({},a)})})})),setGrainEffect:t=>n(e=>({interfaceSettings:l(o({},e.interfaceSettings),{grainSettings:l(o({},e.interfaceSettings.grainSettings),{grainEffect:t})})})),setIsScrollMode:t=>n(e=>({interfaceSettings:l(o({},e.interfaceSettings),{pagesSettings:l(o({},e.interfaceSettings.pagesSettings),{isScrollMode:t})})})),setPagesBackgroundImageMode:t=>n(e=>({interfaceSettings:l(o({},e.interfaceSettings),{pagesSettings:l(o({},e.interfaceSettings.pagesSettings),{backgroundImageMode:t})})})),setPlaylistViewMode:t=>n(e=>({interfaceSettings:l(o({},e.interfaceSettings),{pagesSettings:l(o({},e.interfaceSettings.pagesSettings),{playlistViewMode:t})})})),setIsDynamicColor:t=>n(e=>({colorSettings:l(o({},e.colorSettings),{isDynamicColor:t})})),updatePlaybarStyle:(t,a,r)=>n(e=>({playbarSettings:l(o({},e.playbarSettings),{styles:l(o({},e.playbarSettings.styles),{[t]:l(o({},e.playbarSettings.styles[t]),{[a]:r})})})})),setPlaybarMode:t=>n(e=>({playbarSettings:l(o({},e.playbarSettings),{mode:t})})),resetAllSettings:()=>{n(ye)}}),{name:"lucid-settings"})),Ee=e=>{try{return new URL(e),!0}catch(e){return!1}},ke=e=>decodeURIComponent((null==(e=null==(e=e.match(/family=([^&:]+)/))?void 0:e[1])?void 0:e.replace(/\+/g," "))||"")||"",xe=(e,a,r)=>Object.entries(e[a]).map(([t,e])=>({id:"style-"+a,sectionName:"Styles",conditionalRender:!0,cardProps:{title:"Set "+t,type:"input",settings:o({label:"",defaultValue:e},"number"==typeof e?{type:"number",onChange:e=>{r(a,t,Number(e))},settings:{max:256,min:0,step:1}}:{type:"text",onChange:e=>{r(a,t,e)}})}})),g=e(r()),m=e(r()),Re=({children:e})=>m.default.createElement("div",{className:"tooltip-container"},m.default.createElement("div",{className:"tooltip"},m.default.createElement("span",{className:"tooltip-icon"},m.default.createElement("svg",{role:"img","aria-label":"Tooltip icon",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},m.default.createElement("path",{d:"M12 2c5.523 0 10 4.478 10 10s-4.477 10-10 10S2 17.522 2 12 6.477 2 12 2Zm0 1.667c-4.595 0-8.333 3.738-8.333 8.333 0 4.595 3.738 8.333 8.333 8.333 4.595 0 8.333-3.738 8.333-8.333 0-4.595-3.738-8.333-8.333-8.333ZM12 15.5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Zm0-8.75a2.75 2.75 0 0 1 2.75 2.75c0 1.01-.297 1.574-1.051 2.359l-.169.171c-.622.622-.78.886-.78 1.47a.75.75 0 0 1-1.5 0c0-1.01.297-1.574 1.051-2.359l.169-.171c.622-.622.78-.886.78-1.47a1.25 1.25 0 0 0-2.493-.128l-.007.128a.75.75 0 0 1-1.5 0A2.75 2.75 0 0 1 12 6.75Z",fill:"currentColor"}))),m.default.createElement("span",{className:"tooltip-content"},e))),_e=({title:e,tooltip:t,selectedValue:a})=>g.default.createElement("div",{className:"title-container"},g.default.createElement("div",{className:"title-wrapper"},e&&g.default.createElement("h5",{className:"title"},e),t&&g.default.createElement(Re,null,t)),a&&g.default.createElement("p",{className:"selected-value"},"Selected: ",a)),Ce=e(r()),Pe=()=>Ce.default.createElement("svg",{role:"img","aria-label":"Arrow Down",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Ce.default.createElement("path",{d:"M4.293 8.293a1 1 0 0 1 1.414 0L12 14.586l6.293-6.293a1 1 0 1 1 1.414 1.414l-7 7a1 1 0 0 1-1.414 0l-7-7a1 1 0 0 1 0-1.414Z",fill:"#ffffff"})),f=e(r()),Oe=({options:e,selectedValue:a,onChange:t,placeholder:r,disabled:n})=>{let i=(0,f.useRef)(null),[l,o]=f.default.useState(!1);let s=e=>{o(!1),t(e)};return(0,f.useEffect)(()=>{let e=e=>{i.current&&!i.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"dropdown-container",ref:i},f.default.createElement("button",{className:"dropdown-button "+(l?"open":""),onClick:()=>{o(e=>!e)},"aria-label":"Toggle dropdown menu",type:"button"},r||a||"Dropdown",f.default.createElement("span",{className:"dropdown-arrow"},f.default.createElement(Pe,null))),f.default.createElement("div",{className:"dropdown-menu "+(l?"open":"")},l?null==e?void 0:e.map(t=>f.default.createElement("li",{key:t.value,className:"dropdown-item "+(a===t.value?"selected":""),onClick:()=>!t.disabled&&s(t.value),onKeyDown:e=>!t.disabled&&"Enter"===e.key&&s(t.value),style:{opacity:""+(n?.75:1)}},t.label)):null)))},b=e(r()),Le=(0,b.forwardRef)(({label:e,defaultValue:t,onChange:a,type:r,placeholder:n,settings:i},l)=>{let[o,s]=(0,b.useState)(t||null),c=(0,b.useMemo)(()=>((t,a)=>{let r=null;return(...e)=>{r&&clearTimeout(r),r=setTimeout(()=>{t(...e)},a)}})(e=>{null!=a&&a(e)},1e3),[a]);t=(0,b.useCallback)(e=>{e=e.target.value;s(e),c(e)},[c]);return b.default.createElement("div",{className:"input-container"},b.default.createElement("label",{"aria-label":e},b.default.createElement("input",{"aria-label":e,type:r,className:"input",value:null!=o?o:"",onChange:t,placeholder:n,step:"number"===r&&i?i.step:1,min:"number"===r&&i?i.min:0,max:"number"===r&&i?i.max:100,ref:l})))}),Me=e(r()),Ie=({onChange:e,checked:t,label:a})=>Me.default.createElement("div",{className:"slider-wrapper"},Me.default.createElement("label",{className:"switch","aria-label":a},Me.default.createElement("input",{"aria-label":"toggleSwtich",type:"checkbox",checked:t,onChange:()=>{e(!t)}}),Me.default.createElement("span",{className:"slider round"}))),v=e(r()),Ne=({title:e,tooltip:t,selectedValue:a,type:r,settings:n,children:i,style:l})=>v.default.createElement("div",{className:"card"},v.default.createElement(_e,{title:e,tooltip:t,selectedValue:a}),v.default.createElement("div",{className:"children-wrapper",style:l||{}},"dropdown"===r&&v.default.createElement(Oe,o({},n)),"input"===r&&v.default.createElement(Le,o({},n)),"toggle"===r&&v.default.createElement(Ie,o({},n)),"button"===r&&v.default.createElement(u,o({},n)),i)),Ae=e(r()),Be=e=>{var{children:t,className:a}=e,e=q(e,["children","className"]);return Ae.default.createElement("div",l(o({},e),{className:"cards-wrapper "+(a||"")}),t)},Te=e(r()),Ue=e=>{var t,a,r=new Map;for(a of e)r.has(a.id)||r.set(a.id,[]),null!=(t=r.get(a.id))&&t.push(a);return Array.from(r.entries()).map(([e,t])=>{var a;return t[0].conditionalRender?Te.default.createElement(Be,{key:e,id:e,className:e+" combine"},null!=(a=t[0])&&a.sectionName?Te.default.createElement("label",{"aria-label":null==(a=t[0])?void 0:a.sectionName,htmlFor:e},null==(a=t[0])?void 0:a.sectionName):null,t.map(e=>e.conditionalRender?Te.default.createElement(Ne,o({key:e.id},e.cardProps)):null)):null})},h=e(r()),De=()=>{let{backgroundSettings:{mode:e,styles:t,customBackgroundOverride:a},colorSettings:{isDynamicColor:r},setBackgroundMode:n,updateBackgroundStyle:i,setIsDynamicColor:l,setCustomBackgroundOverride:o}=_(),[s,c]=(0,h.useState)(e);var u=[{id:"backgroundOption",conditionalRender:!0,cardProps:{title:"Background Option",type:"dropdown",tooltip:"Select the background mode to customize your background.",settings:{placeholder:s,selectedValue:s,options:Y,onChange:e=>{c(e),n(e)}}}},...xe(t,e,i),{id:"backgroundCustomUrl",conditionalRender:"static"===e,cardProps:{title:"Background image.",type:"input",tooltip:h.default.createElement(h.default.Fragment,null,h.default.createElement("span",null,"Use a custom URL for the background image."),h.default.createElement("span",null,"Ensure the URL is a valid image link (e.g., .jpg, .png)."),h.default.createElement("span",null,'Use "now-playing" for the now playing art image.'),h.default.createElement("span",null,'Use "current-page" for the current page art image.')),settings:{type:"text",defaultValue:(null==a?void 0:a.url)||"",label:"Url",validation:e=>Ee(e),onChange:e=>{o(e)}}}},{id:"dynamicColorToggle",conditionalRender:!0,cardProps:{title:"Dynamic Color",type:"toggle",tooltip:"Enable dynamic color to adjust colors based on current playing album art.",settings:{checked:r,label:"Dynamic Color Toggle",onChange:e=>{l(e)}}}}];return h.default.createElement(R,{title:"Background Settings",description:"Set your Spotify interface settings."},Ue(u))},$e=console.log,je=console.debug,ze=console.error,Ve=console.warn,Fe={prefix:"font-weight: bold; color: #4DB6AC; font-size: 0.85rem;",error:"color: #dc3545;",warn:"color: #ffc107;",debug:"color: #17a2b8;",info:""},He=(e,t,...a)=>{var r={info:$e,debug:je,error:ze,warn:Ve}[e],e=Fe[e];r("%c[Lucid] %c"+t,Fe.prefix,e,...a)},S=(e,...t)=>He("info",e,...t),w=(e,...t)=>He("debug",e,...t),E=(e,...t)=>He("error",e,...t),Ge=(e,...t)=>He("warn",e,...t),k=e(r()),qe=()=>{let{exportSettings:t,importSettings:a}=_(),[e,r]=(0,k.useState)(!1),n=(0,k.useRef)(null);let i=()=>{var e=(null==(e=n.current)?void 0:e.value.trim())||"{}";"{}"===e?p("Please enter valid JSON settings.",!0):a(e)};return k.default.createElement(R,{title:"Settings Import/Export",description:"Manage your settings easily."},k.default.createElement(Be,null,k.default.createElement(Ne,{title:"Import and Export Settings",type:"normal",tooltip:"Use these buttons to import settings from a JSON file or export your current theme settings to your clipboard.",style:{display:"flex",gap:"0.5rem"}},k.default.createElement(u,{onClick:()=>{var e=t();navigator.clipboard.writeText(e).then(()=>{p("Settings exported to clipboard!")}).catch(e=>{E("Failed to copy: ",e),p("Failed to copy settings to clipboard.",!0)})}},"Export"),k.default.createElement(u,{onClick:()=>{r(e=>!e),e&&n.current&&(n.current.value="")},variant:e?"danger":"primary"},e?"Cancel Import":"Import")),e&&k.default.createElement(Ne,{title:"Import Settings JSON",type:"normal",tooltip:"Paste your JSON settings here to import them. Ensure the JSON is correctly formatted.",style:{display:"flex",gap:"0.5rem"}},k.default.createElement(u,{onClick:async()=>{try{var e=await navigator.clipboard.readText();n.current&&(n.current.value=e,i()),p("Clipboard content pasted successfully!")}catch(e){E("Failed to read clipboard: ",e),p("Failed to read clipboard content.",!0)}}},"Paste And Import"),k.default.createElement(Le,{ref:n,type:"text",label:"Paste JSON here",placeholder:"Paste JSON here"}),k.default.createElement(u,{onClick:i},"Import"))))},C=e(r()),Je=()=>{let{interfaceSettings:{fontSettings:{body:{fontFamily:e}},grainSettings:{grainEffect:t},pagesSettings:{isScrollMode:a,backgroundImageMode:r,playlistViewMode:n},borderSettings:{color:i,style:l,thickness:o}},setFont:s,setGrainEffect:c,setPagesBackgroundImageMode:u,setPlaylistViewMode:d,setIsScrollMode:p,setBorderColor:g,setBorderStyle:m,setBorderThickness:f,settingAccessPosition:y,setSettingAccessPosition:b}=_(),[v,h]=(0,C.useState)(t),[S,w]=(0,C.useState)(r),[E,k]=(0,C.useState)(n);var x=[{id:"themeSettings",conditionalRender:!0,cardProps:{title:"Settings Access Position",tooltip:"Choose how to access settings: via the context menu button or a navigation button.",type:"dropdown",settings:{options:ne,placeholder:y,selectedValue:y,onChange:e=>{b(e)}}}},{id:"font",conditionalRender:!0,cardProps:{title:"Font",type:"input",tooltip:C.default.createElement(C.default.Fragment,null,"Supports both Google Fonts via URL and local fonts.",C.default.createElement("span",null,"For Google Fonts, use the full URL (e.g., https://fonts.googleapis.com/css2?family=Roboto). "),C.default.createElement("span",null,"For local fonts, type the font family name (e.g., 'Arial').")),settings:{type:"text",label:"Font Family or URL",defaultValue:e,onChange:e=>{s("body",(e=>{let t="",a="";return t=Ee(e)?(a=e,ke(e)):a=e,{url:a,fontFamily:t}})(e.toString()))}}}},{id:"grains",conditionalRender:!0,cardProps:{type:"dropdown",title:"Grains",tooltip:"Choose a grain texture mode.",settings:{options:ee,placeholder:v,selectedValue:v,onChange:e=>{h(e),c(e)}}}},{id:"pageSettings",sectionName:"Pages Setting",conditionalRender:!0,cardProps:{type:"dropdown",title:"Pages Background Image",tooltip:"Choose a background image mode for playlist pages.",settings:{options:te,placeholder:S,selectedValue:S,onChange:e=>{w(e),u(e)}}}},{id:"pageSettings",conditionalRender:!0,cardProps:{type:"dropdown",tooltip:"Sets the view mode for playlists.",title:"Playlist View",settings:{options:ae,placeholder:E,selectedValue:E,onChange:e=>{k(e),d(e)}}}},{id:"pageSettings",conditionalRender:!0,cardProps:{title:"Toggle Playlist Scroll Mode",tooltip:"Enable or disable scrolling for the playlist art image.",type:"toggle",settings:{checked:a,label:"Scroll Mode Toggle",onChange:e=>{p(e)}}}},{id:"borderSettings",conditionalRender:!0,sectionName:"Border Settings",cardProps:{title:"Border Thickness",tooltip:"",type:"input",settings:{type:"number",label:"Border Thickness",defaultValue:o,onChange:e=>{f(Number(e))},settings:{step:1,min:0,max:16}}}},{id:"borderSettings",conditionalRender:!0,cardProps:{title:"Border Color",tooltip:"",type:"input",settings:{type:"text",label:"Border Color",defaultValue:i,onChange:e=>{g(e)}}}},{id:"borderSettings",conditionalRender:!0,cardProps:{title:"Border Style",tooltip:"",type:"dropdown",settings:{options:re,selectedValue:l,onChange:e=>{m(e)}}}}];return C.default.createElement(R,{title:"Interface Settings",description:"Set your Spotify interface settings."},Ue(x))},We=e(r()),Ze=()=>{let{playbarSettings:{mode:e,styles:t},setPlaybarMode:a,updatePlaybarStyle:r}=_(),[n,i]=(0,We.useState)(e);var l=[{id:"playbarOption",conditionalRender:!0,cardProps:{title:"Playbar Option",type:"dropdown",settings:{placeholder:n,selectedValue:n,options:Q,onChange:e=>{i(e),a(e)}}}},...xe(t,e,r)];return We.default.createElement(R,{title:"Playbar Settings",description:"Set your Spotify Now Playing Bar settings."},Ue(l))},Ke=e(r()),Xe=()=>{let e=_().resetAllSettings;return Ke.default.createElement(R,{title:"Reset Settings",description:"Reset your theme settings."},Ue([{id:"resetButtonCard",conditionalRender:!0,cardProps:{title:"Reset All Settings",type:"button",settings:{variant:"danger",size:"medium",children:"Reset",onClick:()=>{window.confirm("Are you sure you want to reset all settings to their default values? This action cannot be undone.")&&e()}}}}]))},x=e(r()),Ye={settings:!1,changelog:!1},{ModalContextProvider:Qe,useModal:et}=(()=>{let i=x.default.createContext(null);return{ModalContextProvider:({children:e})=>{let[a,r]=x.default.useState(Ye),t=x.default.useCallback(t=>({isOpen:a[t],openModal:x.default.useCallback(()=>{r(e=>l(o({},e),{[t]:!0}))},[t]),closeModal:x.default.useCallback(()=>{r(e=>l(o({},e),{[t]:!1}))},[t])}),[a]);var n=x.default.useMemo(()=>t,[t]);return x.default.createElement(i.Provider,{value:n},e)},useModal:e=>{var t=x.default.useContext(i);if(t)return t(e);throw new Error("Wrap Element with ModalContextProvider")}}})(),P=e(r()),tt=P.default.memo(()=>{var{isOpen:e,closeModal:t}=et("settings");return P.default.createElement(X,{title:"Lucid Settings",onClose:t,isOpen:e},P.default.createElement("div",{className:"sections-container"},P.default.createElement(De,null),P.default.createElement(Je,null),P.default.createElement(Ze,null),P.default.createElement(Xe,null),P.default.createElement(qe,null)))}),at=e(r()),rt=({onClick:e})=>new Spicetify.Topbar.Button("Lucid Settings",'<svg width="24" height="24" fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="#ffffff"/></svg>',e,!1,!0).element,nt=({onClick:e})=>new Spicetify.Menu.Item("Lucid Settings",!1,e,'<svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.012 2.25c.734.008 1.465.093 2.182.253a.75.75 0 0 1 .582.649l.17 1.527a1.384 1.384 0 0 0 1.927 1.116l1.401-.615a.75.75 0 0 1 .85.174 9.792 9.792 0 0 1 2.204 3.792.75.75 0 0 1-.271.825l-1.242.916a1.381 1.381 0 0 0 0 2.226l1.243.915a.75.75 0 0 1 .272.826 9.797 9.797 0 0 1-2.204 3.792.75.75 0 0 1-.848.175l-1.407-.617a1.38 1.38 0 0 0-1.926 1.114l-.169 1.526a.75.75 0 0 1-.572.647 9.518 9.518 0 0 1-4.406 0 .75.75 0 0 1-.572-.647l-.168-1.524a1.382 1.382 0 0 0-1.926-1.11l-1.406.616a.75.75 0 0 1-.849-.175 9.798 9.798 0 0 1-2.204-3.796.75.75 0 0 1 .272-.826l1.243-.916a1.38 1.38 0 0 0 0-2.226l-1.243-.914a.75.75 0 0 1-.271-.826 9.793 9.793 0 0 1 2.204-3.792.75.75 0 0 1 .85-.174l1.4.615a1.387 1.387 0 0 0 1.93-1.118l.17-1.526a.75.75 0 0 1 .583-.65c.717-.159 1.45-.243 2.201-.252Zm0 1.5a9.135 9.135 0 0 0-1.354.117l-.109.977A2.886 2.886 0 0 1 6.525 7.17l-.898-.394a8.293 8.293 0 0 0-1.348 2.317l.798.587a2.881 2.881 0 0 1 0 4.643l-.799.588c.32.842.776 1.626 1.348 2.322l.905-.397a2.882 2.882 0 0 1 4.017 2.318l.11.984c.889.15 1.798.15 2.687 0l.11-.984a2.881 2.881 0 0 1 4.018-2.322l.905.396a8.296 8.296 0 0 0 1.347-2.318l-.798-.588a2.881 2.881 0 0 1 0-4.643l.796-.587a8.293 8.293 0 0 0-1.348-2.317l-.896.393a2.884 2.884 0 0 1-4.023-2.324l-.11-.976a8.988 8.988 0 0 0-1.333-.117ZM12 8.25a3.75 3.75 0 1 1 0 7.5 3.75 3.75 0 0 1 0-7.5Zm0 1.5a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z" fill="#fff"/></svg>'),it=t=>{let a=_().settingAccessPosition;(0,at.useEffect)(()=>{let e=null;return"nav"===a?e=rt({onClick:t}):"context-menu"===a&&(e=nt({onClick:t})).register(),()=>{e&&("nav"===a&&e.remove?e.remove():"context-menu"===a&&"deregister"in e&&e.deregister())}},[a,t])},lt=e(r()),ot=lt.default.memo(()=>{w("Render <SettingsManager />");var{isOpen:e,openModal:t}=et("settings");return it(t),lt.default.createElement(lt.default.Fragment,null,e&&lt.default.createElement(tt,null))}),st=(e,t)=>[e,t].filter(Boolean).join(" ").trim(),ct=e=>{var t;return Object.keys(e).length?(t={},void 0!==e.blur&&(t.filter=st(t.filter,`blur(${e.blur}px)`)),void 0!==e.backdropBlur&&(t.backdropFilter=`blur(${e.backdropBlur}px)`),void 0!==e.contrast&&(t.filter=st(t.filter,`contrast(${e.contrast})`)),void 0!==e.brightness&&(t.filter=st(t.filter,`brightness(${e.brightness})`)),void 0!==e.saturation&&(t.filter=st(t.filter,`saturate(${e.saturation})`)),void 0!==e.width&&(t.width=e.width+"px"),void 0!==e.height&&(t.height=e.height+"px"),void 0===e.paddingX&&void 0===e.paddingY||(t.padding=`${e.paddingY||0}px ${e.paddingX||0}px`),void 0!==e.borderRadius&&(t.borderRadius=e.borderRadius+"px"),void 0!==e.backgroundColor&&(t.backgroundColor=e.backgroundColor+"px"),t):{}},O=e(r()),t=({style:e})=>O.default.createElement("div",{className:"animated-background-container",style:ct(e)},O.default.createElement("div",{className:"back"}),O.default.createElement("div",{className:"backleft"}),O.default.createElement("div",{className:"backright"}),O.default.createElement("div",{className:"front"})),ut=e(r()),dt=({style:e})=>ut.default.createElement("div",{className:"solid-background",style:o({},ct(e))}),pt={underMainBackgroundImage:"",pageCategory:"other",artworkData:{nowPlayingArtURL:"",currentPageURI:"",currentPageArtURL:""},rootStyle:document.body.style||document.documentElement.style},L=c(e=>l(o({},pt),{updateArtworkData:t=>e(e=>l(o({},e),{artworkData:o(o({},e.artworkData),t)})),setPageCategory:t=>e(e=>l(o({},e),{pageCategory:t})),setUnderMainViewBackgroundImage:t=>e(e=>l(o({},e),{underMainBackgroundImage:t})),setIsCustomControls:t=>e(e=>l(o({},e),{isCustomControls:t})),setRootStyle:t=>e(e=>l(o({},e),{rootStyle:t}))})),gt=e(r()),c=({style:e})=>{let t=_().backgroundSettings.customBackgroundOverride,a=L().artworkData;var r="current-page"===(r=t.url)?(null==a?void 0:a.currentPageArtURL)||(null==a?void 0:a.nowPlayingArtURL)||"":r&&""!==r.trim()&&"now-playing"!==r?r||"":(null==a?void 0:a.nowPlayingArtURL)||"";return gt.default.createElement("div",{className:"static-background",style:o({backgroundImage:`url(${r})`},ct(e))})},mt=e(r()),ft={animated:t,static:c,solid:dt},yt=()=>{w("Render <BackgroundManager />");var{mode:e,styles:t}=_().backgroundSettings,t=t[e],e=ft[e];return mt.default.createElement("div",{className:"background-wrapper"},e?mt.default.createElement(e,{style:t}):mt.default.createElement(dt,{style:{backgroundColor:"#202020"}}))},bt=async e=>{let t=0;for(;t<=3;)try{var a=await Spicetify.GraphQL.Request({name:"queryArtistOverview",operation:"query",sha256Hash:"35648a112beb1794e39ab931365f6ae4a8d45e65396d641eeda94e4003d41497",value:null},{uri:e,includePrerelease:!0,locale:null});if(a)return a}catch(e){if(!(e instanceof Error&&e.message.includes("DUPLICATE_REQUEST_ERROR")&&t<3))throw console.error("Error fetching artist metadata:",e),e;t++,Ge(`Duplicate request detected (getArtistMetaData). Retrying in 1 second... (Attempt ${t})`),await new Promise(e=>setTimeout(e,1e3))}},vt=async e=>{let t=0;for(;t<=3;)try{var a=await Spicetify.GraphQL.Request({name:"getAlbum",operation:"query",sha256Hash:"469874edcad37b7a379d4f22f0083a49ea3d6ae097916120d9bbe3e36ca79e9d",value:null},{uri:e,locale:null,offset:0,limit:50});if(a)return a}catch(e){if(!(e instanceof Error&&e.message.includes("DUPLICATE_REQUEST_ERROR")&&t<3))throw console.error("Error fetching album metadata:",e),e;t++,Ge(`Duplicate request detected (getAlbumMetaData). Retrying in 1 second... (Attempt ${t})`),await new Promise(e=>setTimeout(e,1e3))}},ht=e(r()),St=()=>{w("Render <ArtworkManager />");let{pageCategory:e,rootStyle:o,artworkData:s,updateArtworkData:c}=L(),{pagesSettings:t}=_().interfaceSettings,a=ht.default.useCallback(async()=>{var e,t,a,r,n,i=Spicetify.Platform.History.location.pathname,l=(i=i,l=Spicetify.URI.isPlaylistV1OrV2(i),e=Spicetify.URI.isArtist(i),t=Spicetify.URI.isAlbum(i),a=Spicetify.URI.isShow(i),r=Spicetify.URI.isProfile(i),l||e||t||r||a?(r=null==(r=i.match(/\/(?:playlist|artist|album|user|show)\/([^/]+)/))?void 0:r[1])?`spotify:${l?"playlist":e?"artist":t?"album":a?"show":"user"}:`+r:(console.warn("No ID found in pathname:",i),null):null);if(s.currentPageURI!==l){o.setProperty("--artwork-opacity","0");try{l?(n=await(async e=>{var t,a,r,n,i,l,o,s,c,u,d,p,g,m,f,y,b=e.split(":")[1];try{switch(b){case"playlist":case"show":return(null==(t=(await Spicetify.Platform.PlaylistAPI.getMetadata(e)).images.find(e=>e.url))?void 0:t.url)||null;case"artist":var v=await bt(e);return(null==(i=null==(n=null==(r=null==(a=v.data)?void 0:a.artistUnion.visuals.headerImage)?void 0:r.sources)?void 0:n[0])?void 0:i.url)||(null==(c=null==(s=null==(o=null==(l=v.data)?void 0:l.artistUnion.visuals.avatarImage)?void 0:o.sources)?void 0:s[0])?void 0:c.url)||null;case"album":var h=await vt(e);return(null==(p=null==(d=null==(u=h.data)?void 0:u.albumUnion.coverArt.sources)?void 0:d[2])?void 0:p.url)||(null==(f=null==(m=null==(g=h.data)?void 0:g.albumUnion.coverArt.sources)?void 0:m[0])?void 0:f.url)||null;case"user":var S=await Spicetify.Platform.RequestBuilder.build().withHost("https://spclient.wg.spotify.com/user-profile-view/v3").withPath("/profile/"+e.split(":")[2]).send();return(null==(y=null==S?void 0:S.body)?void 0:y.image_url)||null;default:return null}}catch(e){return E(`Error fetching artwork for ${b}:`,e),null}})(l)||"",c({currentPageArtURL:n,currentPageURI:l})):c({currentPageArtURL:"",currentPageURI:""})}catch(e){console.error("Error updating artwork:",e),c({currentPageArtURL:"",currentPageURI:""})}finally{setTimeout(()=>o.setProperty("--artwork-opacity","1"),500)}}},[s.currentPageURI,o,c]);return ht.default.useEffect(()=>{if(s.currentPageArtURL?(o.setProperty("--playlist-art-image",`url(${s.currentPageArtURL})`),S("Updated Playlist Artwork URL to "+s.currentPageArtURL)):s.currentPageURI&&"other"!==e&&(E("No artwork URL found for URI: "+s.currentPageURI),o.setProperty("--playlist-art-image","none")),"inherit"===t.backgroundImageMode){let e=Spicetify.Platform.History.listen(a);return a(),()=>{e()}}},[t.backgroundImageMode,s.currentPageArtURL,s.currentPageURI,e,o,a]),ht.default.useEffect(()=>{s.nowPlayingArtURL&&(o.setProperty("--now-playing-art-image",`url(${s.nowPlayingArtURL})`),S("Updated Now Playing Art View: "+s.nowPlayingArtURL))},[s.nowPlayingArtURL,o]),ht.default.useEffect(()=>{let e=async()=>{var e=await(async()=>{for(var e;null==(e=null==Spicetify?void 0:Spicetify.Player)||!e.data;)await new Promise(e=>setTimeout(e,100));try{return Spicetify.Player.data.item.metadata.image_xlarge_url||Spicetify.Player.data.item.metadata.image_large_url||Spicetify.Player.data.item.metadata.image_url||Spicetify.Player.data.item.metadata.image_small_url||""}catch(e){E("Error updating getting URL: ",e)}})();c({nowPlayingArtURL:e})};return e(),Spicetify.Player.addEventListener("songchange",e),()=>{Spicetify.Player.removeEventListener("songchange",e)}},[c]),null},wt=e(r()),Et=()=>{let{borderSettings:t}=_().interfaceSettings;return(0,wt.useEffect)(()=>{e=t;var e=Object.keys(e).length?Object.entries(e).map(([e,t])=>`--border-${e}: ${"thickness"===e?t+"px":t};`).join(" "):"";document.documentElement.style.cssText+=e},[t]),null},kt=(e,t,a)=>"#"+(e<<16|t<<8|a).toString(16).padStart(6,"0"),xt=(e,t,a)=>{var[e,t,a]=[e/255,t/255,a/255],[e,t,a]=[e<=.03928?e/12.92:((e+.055)/1.055)**2.4,t<=.03928?t/12.92:((t+.055)/1.055)**2.4,a<=.03928?a/12.92:((a+.055)/1.055)**2.4];return.2126*e+.7152*t+.0722*a},Rt=(e,t)=>l(o({},e),{r:Math.max(0,Math.round(e.r*t)),g:Math.max(0,Math.round(e.g*t)),b:Math.max(0,Math.round(e.b*t)),hex:kt(Math.max(0,Math.round(e.r*t)),Math.max(0,Math.round(e.g*t)),Math.max(0,Math.round(e.b*t)))}),M=(e,t)=>l(o({},e),{r:Math.min(255,Math.round(e.r+(255-e.r)*t)),g:Math.min(255,Math.round(e.g+(255-e.g)*t)),b:Math.min(255,Math.round(e.b+(255-e.b)*t)),hex:kt(Math.min(255,Math.round(e.r+(255-e.r)*t)),Math.min(255,Math.round(e.g+(255-e.g)*t)),Math.min(255,Math.round(e.b+(255-e.b)*t)))}),_t=(e,t)=>{e=xt(e.r,e.g,e.b),t=xt(t.r,t.g,t.b);return(Math.max(e,t)+.05)/(Math.min(e,t)+.05)},Ct=e(a()),Pt=null;async function Ot(s,e,c){return e&&c?new Promise(o=>{Pt&&clearTimeout(Pt),Pt=setTimeout(async()=>{try{var e,t,a,r=await(async n=>{try{var i=await(0,Ct.loadImage)(n),l=Math.max(i.width/10,10),o=Math.max(i.height/10,10),s=(0,Ct.createCanvas)(l,o).getContext("2d"),c=(s.drawImage(i,0,0,l,o),s.getImageData(0,0,l,o)),u=c.data,d={};let t={};var p=Math.floor(.2*u.length);for(let e=0;e<p;e+=4){var g=u[e],m=u[e+1],f=u[e+2],y=g+`-${m}-`+f;d[y]=(d[y]||0)+1,t[y]={r:g,g:m,b:f,hex:kt(g,m,f)}}var b=Object.entries(d).sort((e,t)=>t[1]-e[1]).map(([e])=>t[e]),v=b[0];let e=b[1],a=b[2],r=2;for(;!e||_t(v,e)<2.5;){if(r>=b.length){e=M(v,.2);break}e=b[r],r++}for(;!a||_t(v,a)<2.5||_t(e,a)<2.5;){if(r>=b.length){a=M(e,.2);break}a=b[r],r++}return{baseColor:v,secondaryColor:e,tertiaryColor:a}}catch(e){return E("Error extracting colors: ",e),e}})(c);r instanceof Error?(E("Error extracting colors: "+r.message),o(null)):(e=({baseColor:n,secondaryColor:i,tertiaryColor:l}=[r][0],{main:Rt(i,.4),sidebar:Rt(i,.5),card:Rt(l,.5),player:Rt(i,.6),"progress-bar":M(i,.6),accent:M(n,.4),highlight:M(i,.2),button:M(l,.4),"button-active":M(l,.4),text:M(n,.9),subtext:M(i,.9),primary:n,secondary:i,tertiary:l}),t=s,a=e,a=`:root {${Object.entries(a).map(([e,t])=>`
--spice-${e}: ${t.hex} !important;
--spice-rgb-${e}: ${t.r}, ${t.g}, ${t.b} !important;`).join("")}
}`,a+=":root{\nwill-change: --spice-main,--spice-rgb-main,--spice-sidebar,--spice-rgb-sidebar,--spice-card,--spice-rgb-card,--spice-player,--spice-rgb-player,--spice-accent,--spice-rgb-accent,--spice-highlight,--spice-rgb-highlight,--spice-button,--spice-rgb-button,--spice-button-active,--spice-rgb-button-active,--spice-text,--spice-rgb-text,--spice-progress-bar,--spice-rgb-progress-bar,--spice-subtext,--spice-rgb-subtext,--spice-primary,--spice-rgb-primary,--spice-secondary,--spice-rgb-secondary,--spice-tertiary,--spice-rgb-tertiary;\ntransition: all 0.3s ease-in-out;\n}",t.textContent=a,o(r))}catch(e){E("Error saving colors to style: ",e instanceof Error?e.message:e),o(null)}var n,i,l},200)}):null}var Lt=e(r()),Mt=()=>{w("Render <ColorManager />");let{isDynamicColor:e}=_().colorSettings,t=L().artworkData,a=(0,Lt.useRef)(null),r=(0,Lt.useRef)(null);return(0,Lt.useEffect)(()=>(a.current=document.createElement("style"),a.current.id="lucid_dynamic_colors",document.head.appendChild(a.current),()=>{a.current&&document.head.removeChild(a.current)}),[]),(0,Lt.useEffect)(()=>{e?e&&t.nowPlayingArtURL!==r.current&&(null!=a&&a.current&&e&&t.nowPlayingArtURL&&Ot(a.current,e,t.nowPlayingArtURL).then(()=>{S("Dynamic colors updated!")}).catch(e=>{E("Error updating colors:",e)}),r.current=t.nowPlayingArtURL):(r.current&&(r.current=null),a.current&&(async e=>{e.textContent=":root{\nwill-change: --spice-main,--spice-rgb-main,--spice-sidebar,--spice-rgb-sidebar,--spice-card,--spice-rgb-card,--spice-player,--spice-rgb-player,--spice-accent,--spice-rgb-accent,--spice-highlight,--spice-rgb-highlight,--spice-button,--spice-rgb-button,--spice-button-active,--spice-rgb-button-active,--spice-text,--spice-rgb-text,--spice-progress-bar,--spice-rgb-progress-bar,--spice-subtext,--spice-rgb-subtext,--spice-primary,--spice-rgb-primary,--spice-secondary,--spice-rgb-secondary,--spice-tertiary,--spice-rgb-tertiary;\ntransition: all 0.3s ease-in-out;\n}"})(a.current))},[e,t.nowPlayingArtURL]),null},It=e(r()),Nt=()=>{w("Render <FontManager />");let{fontSettings:e}=_().interfaceSettings,n=It.default.useCallback((e,t)=>{document.documentElement.style.setProperty(`--${e}-font-to-use`,t)},[]),t=It.default.useCallback(async t=>{var{fontFamily:a,url:r}=e[t];try{await((e,t)=>{let a=document.getElementById(t);a||((a=document.createElement("link")).rel="stylesheet",a.id=t,document.head.appendChild(a)),a.href=e})(r,t+"-font"),n(t,a)}catch(e){console.error("Failed to load font from "+r,e),n(t,a)}},[e,n]);return It.default.useEffect(()=>{w("useFontManager effect ran."),Object.keys(e).map(e=>t(e))},[e,t]),null},At="playlist-art-image-",Bt="playlist-view-",Tt="1.2.46"<=Spicetify.Platform.version,Ut="light"===(null==Spicetify?void 0:Spicetify.Config.color_scheme)||!1,Dt=!(!Spicetify.Platform||"Windows"!==Spicetify.Platform.operatingSystem)||!(null==(t=null==(t=Spicetify.Platform)?void 0:t.PlatformData)||!t.os_name)&&Spicetify.Platform.PlatformData.os_name.toLowerCase().includes("win"),$t=!(!document.querySelector(".globalNav")&&!document.querySelector(".Root__globalNav")),jt=!!document.getElementById("customControls")&&(null!=(c=document.querySelector(".lucid-transperent-window-controls"))&&c.remove(),!0),zt=e(r()),Vt=e=>{(0,zt.useEffect)(()=>{if(e)return document.body.classList.add(e),()=>{document.body.classList.remove(e)}},[e])},Ft=()=>(w("Render <GlobalNavManager />"),Vt($t?"global-nav":"control-nav"),null),Ht=e(r()),Gt=()=>{w("Render <GrainManager />");var{grainSettings:{grainEffect:e}}=_().interfaceSettings;return Vt("grain-"+e),Ht.default.createElement("div",{id:"grainEffect","data-grainEffect":e})},qt=e(r()),Jt=()=>{let{pageCategory:e,setPageCategory:a}=L();return Vt(e),qt.default.useEffect(()=>{let e=()=>{var e=Spicetify.Platform.History.location.pathname;a((e=e,Spicetify.URI.isPlaylistV1OrV2(e)?"playlist":Spicetify.URI.isArtist(e)?"artist":Spicetify.URI.isAlbum(e)?"album":Spicetify.URI.isGenre(e)?"genre":Spicetify.URI.isShow(e)?"show":Spicetify.URI.isProfile(e)?"profile":Spicetify.URI.isConcert(e)||Spicetify.URI.isArtistConcerts(e)?"concert":"other"))},t=(e(),Spicetify.Platform.History.listen(()=>{e()}));return()=>{t()}},[a]),null},Wt=e(r()),Zt=()=>{let r=_().playbarSettings;Vt("playbar-"+r.mode),Wt.default.useEffect(()=>{t=r.styles[r.mode],e=!0;var e,t=Object.keys(t).length?(a={},void 0!==t.blur&&(a["--blur"]=t.blur+"px"),void 0!==t.backdropBlur&&(a["--backdrop-blur"]=t.backdropBlur+"px"),void 0!==t.contrast&&(a["--contrast"]=t.contrast),void 0!==t.brightness&&(a["--brightness"]=t.brightness),void 0!==t.saturation&&(a["--saturation"]=t.saturation),void 0!==t.width&&(a["--width"]=t.width),void 0!==t.height&&(a["--height"]=t.height),void 0!==t.paddingX&&(a["--padding-x"]=t.paddingX+"px"),void 0!==t.borderRadius&&(a["--border-radius"]=t.borderRadius+"px"),void 0!==t.backgroundColor&&(a["--background-color"]=t.backgroundColor),void 0!==t.time&&(a["--time"]=t.time+"s"),e?Object.entries(a).map(([e,t])=>e+`: ${t};`).join(" "):a):e?"":{},a=document.querySelector(".Root__now-playing-bar");a?(a.style.cssText=t.toString(),console.log(t)):E("Playbar element not found!")},[r])},Kt=()=>(Zt(),null),Xt=e(r()),Yt=()=>{let{underMainBackgroundImage:t,setUnderMainViewBackgroundImage:a,rootStyle:e}=L(),r=Xt.default.useCallback(e=>{var e=e.reduce((e,t)=>{if(e)return e;if("childList"===t.type&&0<t.addedNodes.length){e=t.addedNodes[0];if(e.firstChild instanceof HTMLDivElement)return e.firstChild}return null},null);null!=e&&e.style?(e=e.style.backgroundImage.replace(/url\(['"]?([^'"]*)['"]?\)/i,"$1"),a(e)):null!==t&&a(null)},[a,t]);Xt.default.useEffect(()=>{let e=new MutationObserver(r);var t=document.querySelector(".under-main-view");return t&&e.observe(t,{childList:!0}),()=>e.disconnect()},[r]),Xt.default.useEffect(()=>(e.setProperty("--under-main-view-art-image",t?`url(${t})`:null),()=>{e.removeProperty("--under-main-view-art-image")}),[t,e])},I=e(r()),Qt=()=>{let{pagesSettings:{playlistViewMode:e,isScrollMode:n,backgroundImageMode:t}}=_().interfaceSettings,{pageCategory:i,underMainBackgroundImage:l}=L(),o=I.default.useRef(null),s=I.default.useRef(null),a=(I.default.useEffect(()=>(document.body.classList.add(At+t,Bt+e),()=>{document.body.classList.remove(Bt+e,At+t)}),[e,t]),I.default.useCallback(e=>{var t,a=o.current,r=s.current;a&&r&&(t=.03*(e=Math.min(e.scrollTop,window.innerHeight))+("artist"===i||l?0:4),r.style.setProperty("--blur",t+"px"),a.style.transform=`translate3d(0 ,${n?-e:0}px, 0)`,a.style.setProperty("--scroll",""+e/1e3))},[n,i,l]));return I.default.useEffect(()=>{let t=document.querySelector(".Root__main-view .os-viewport, .Root__main-view .main-view-container > .main-view-container__scroll-node:not([data-overlayscrollbars-initialize]), .Root__main-view .main-view-container__scroll-node > [data-overlayscrollbars-viewport]");if(t){let e=()=>a(t);return e(),t.addEventListener("scroll",e,{passive:!0}),()=>t.removeEventListener("scroll",e)}},[a]),I.default.createElement("span",{id:"playlistArtContainer",className:`playlist-art-container ${e} `+t,"data-playlist-view-mode":e,ref:o},I.default.createElement("div",{className:"background",ref:s}),I.default.createElement("div",{className:"overlay",style:{height:"100%",width:"100%",position:"absolute"}}))},ea=e(r()),ta=()=>(w("Render <UnderMainViewManager />"),(()=>{let a=ea.default.useRef(null);ea.default.useEffect(()=>{let e=()=>{var e,t;document.getElementById("lucid-under-main-view")||((e=document.createElement("div")).id="lucid-under-main-view",e.className="lucid-under-main-view",(t=document.querySelector(".main-view-container"))&&t.prepend(e),a.current=e,a.current&&Spicetify.ReactDOM.createRoot(a.current).render(ea.default.createElement(Qt,null)))},t=(e(),Spicetify.Platform.History.listen(()=>{e()}));return()=>{t()}},[])})(),Yt(),null),aa=(e,t,a=1,r=0,n=Number.POSITIVE_INFINITY)=>Math.max(r,Math.min(e*(t+a-1),n)),ra=e(r()),na=ra.default.memo(()=>{let i=ra.default.useRef(null),l=L().rootStyle;return ra.default.useEffect(()=>{async function e(){if(!jt&&Dt){var e=Tt?32:64,t=(t=window.innerWidth,window.outerWidth/t),a=window.innerWidth/window.outerWidth,t=Math.round((100*t)**.912872807*100/100-(Tt?0:3)),r=t;try{null!=(n=null==Spicetify?void 0:Spicetify.CosmosAsync)&&n.post&&await Spicetify.CosmosAsync.post("sp://messages/v1/container/control",{type:"update_titlebar",height:r}),S(`Control height set to ${r}px`)}catch(e){E("Error setting control height: "+r)}await 0;var n=aa(64,a,1),r=aa(135,a,1);l.setProperty("--top-bar-padding-start",n+"px"),l.setProperty("--top-bar-padding-end",r+"px"),!Dt||jt||Ut||(r=Tt?aa(e,a,1):e,e=aa(135,a,1),i.current&&(i.current.style.setProperty("--transperent-controls-top-offset",`${Tt?t/4:0}px`),i.current.style.height=r+"px",i.current.style.width=e+"px"))}var t}return setTimeout(e,1e3),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[l]),ra.default.createElement("div",{ref:i,className:"lucid-transperent-window-controls"})}),N=e(r()),ia=N.default.memo(()=>N.default.createElement(N.default.Fragment,null,Dt?N.default.createElement("div",{id:"transperent-controls-container",className:"transperent-controls-container",style:{containerType:"normal"}},!jt&&Dt?N.default.createElement(na,null):null):null)),A=e(r()),la=A.default.memo(()=>(w("Render <MainStateManager />"),A.default.createElement(A.default.Fragment,null,A.default.createElement(Jt,null),A.default.createElement(Gt,null),A.default.createElement(Mt,null),A.default.createElement(Kt,null),A.default.createElement(St,null),A.default.createElement(Et,null),A.default.createElement(Ft,null),A.default.createElement(Nt,null),A.default.createElement(ta,null),A.default.createElement(ia,null))));function oa(e,t){e.innerHTML=`
    #lucid-main .background-container .background-wrapper div { z-index: ${t} !important; }
  `}function sa(e){e.innerHTML=`
    #lucid-main .background-container .background-wrapper div { z-index: -1 !important; }
  `}function ca(t,a,r,n){let i=!1,l=null;new MutationObserver(()=>{var e=t.querySelector(a);e!==l&&(e&&!i?(S("Applying background z-index: "+n),i=!0,oa(r,n)):i&&(S("Removing background z-index: "+n),i=!1,document.querySelector("#lyrics-cinema .lyrics-lyrics-background, #lyrics-cinema .lyrics-lyrics-container")?oa(r,6):sa(r)),l=e)}).observe(t,{childList:!0}),sa(r)}var B=e(r()),ua=()=>(w("Render <Main />"),B.default.useEffect(()=>{(()=>{var r=Spicetify.Locale;function n(e){return e.replace(/[{0}{1}]/g,"").trim()}if(r){n(r.get("playlist.a11y.play")||""),n(r.get("playlist.a11y.pause")||"");var i=r.get("play"),l=r.get("pause"),o=r.get("browse"),s=r.get("playback-control.skip-forward"),c=r.get("playback-control.skip-back"),u=r.get("buddy-feed.friend-activity"),d=r.get("tracklist.a11y.play")||"",p=r.get("view.web-player-home");let e,t;["zh-CN","zh-TW","am","fi"].includes(r.getLocale())?[e,t]=d.split("{1}"):[e,t]=d.split("{0}"),e=n(e),t=n(t);var d=r.get("playback-control.enable-repeat"),g=r.get("playback-control.enable-repeat-one"),r=r.get("playback-control.disable-repeat"),m="lucid_button_styles";let a=document.getElementById(m);a||((a=document.createElement("style")).id=m,document.head.appendChild(a)),a.innerHTML=`
.main-repeatButton-button[aria-checked="false"],
.player-controls__right button[aria-label*="${d}"]  span{
  -webkit-mask-image: var(--repeat-off-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/repeat-off.svg"));
  mask-image: var(--repeat-off-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/repeat-off.svg"));
  background-color: var(--spice-subtext);
  mask-size: contain;
}

.main-repeatButton-button[aria-checked="mixed"],
.player-controls__right button[aria-label*="${r}"] span {
  -webkit-mask-image: var(--repeat-mixed-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/repeat-mixed.svg"));
  mask-image: var(--repeat-mixed-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/repeat-mixed.svg"));
  background-color: var(--spice-accent);
  mask-size: contain;
}

.main-repeatButton-button[aria-checked="true"],
.player-controls__right button[aria-label*="${g}"] span {
  -webkit-mask-image: var(--repeat-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/repeat.svg"));
  mask-image: var(--repeat-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/repeat.svg"));
  background-color: var(--spice-accent);
  mask-size: contain;
}

.player-controls__right button[aria-label*="${r}"] svg,
.player-controls__right button[aria-label*="${d}"] svg {
  transform: scale(1.15);
}

.player-controls__right button[aria-label*="${r}"] svg,
.player-controls__right button[aria-label*="${d}"] svg {
  visibility: hidden;
  opacity: 0;
}

.main-repeatButton-button {
  transform: scale(0.65) !important;
}

.player-controls__buttons>button[aria-label*="${i}"] span,
.main-playButton-button[aria-label*="${i}"],
.main-playButton-PlayButton>button[aria-label*="${i}"]{
  background-color: var(--spice-text) !important;
  -webkit-mask-image: var(--play-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/play.svg")) !important;
  mask-image: var(--play-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/play.svg")) !important;
}

.main-playButton-button[aria-label*="${l}"],
.main-playButton-PlayButton>button[aria-label*="${l}"],
.main-playPauseButton-button[aria-label*="${l}"],
.player-controls__buttons>button[aria-label*="${l}"] span {
  background-color: var(--spice-text) !important;
  -webkit-mask-image: var(--pause-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/pause.svg")) !important;
  mask-image: var(--pause-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/pause.svg")) !important;
}

.Root__globalNav button:is([aria-label="Clear search field"]) {
  background-color: transparent !important;
  border: none !important;
}

button[aria-label="${o}"] path {
  display: none !important;
}

button[aria-label="${o}"] svg {
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-position: center;
  mask-position: center;
  -webkit-mask-image: var(--compass-outline-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/compass-outline.svg"));
  mask-image: var(--compass-outline-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/compass-outline.svg"));
  background-color: var(--spice-subtext) !important;
  scale: 1.25;
}

.main-repeatButton-button[aria-label="${d}"],
.main-repeatButton-button[aria-label="${r}"],
.main-repeatButton-button[aria-label="${g}"],
{
scale: 0.75 !important;
background-color: var(--spice-subtext) !important;
color: var(--spice-subtext);

svg {
  display: none;
}
}

.player-controls__buttons>button[aria-label*="${i}"] span,
.player-controls__buttons>button[aria-label*="${l}"] span{
  display: block;
  mask-size: 100%;
  -webkit-mask-position: center center;
  mask-position: center center;
  background-color: var(--spice-subtext);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: cover;
  mask-size: cover;
  aspect-ratio: 1/1;
}

.main-playPauseButton-button,
.player-controls button[aria-label="${c}"],
.player-controls button[aria-label="${s}"]
{
  display: block;
  mask-size: 100%;
  -webkit-mask-position: center center;
  mask-position: center center;
  background-color: var(--spice-subtext);
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-size: cover;
  mask-size: cover;
  min-height: 1rem;
  min-width: 1rem;
  aspect-ratio: 1/1;
  border-radius: 0 !important;
  border: none !important;
  height: var(--button-size, 24px);
  width: var(--button-size, 24px);
  
  svg,
  span {
    display: none;
    visibility: hidden;
  }
}

.player-controls__buttons>button[aria-label*="${i}"] span svg,
.player-controls__buttons>button[aria-label*="${l}"] span svg {
  display: none;
  visibility: hidden;
}

.player-controls button[aria-label="${c}"] span,
.player-controls button[aria-label="${s}"] span {
  opacity: 0;
}

.player-controls button[aria-label="${c}"] {
  background-color: var(--spice-text);
  -webkit-mask-image: var(--prev-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/prev.svg"));
  mask-image: var(--prev-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/prev.svg"));
}

.player-controls button[aria-label="${s}"] {
  background-color: var(--spice-text);
  -webkit-mask-image: var(--next-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/next.svg"));
  mask-image: var(--next-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/next.svg"));
}

button[aria-label="${u}"]>path {
  display: none;
}

.main-actionButtons>div>button[aria-label="${u}"] svg,
.main-actionButtons>button[aria-label="${u}"] svg {
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-position: center;
  mask-position: center;
  background-color: var(--spice-subtext) !important;
  -webkit-mask-image: var(--people-team-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/people-team.svg"));
  mask-image: var(--people-team-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/people-team.svg"));
}

.main-yourLibraryX-navLink[aria-label="${p}"] svg,
button[aria-label="${p}"] svg {
  path {
display: none !important;
  }

  mask-image: var(--home-outline-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/home-outline.svg"));
  -webkit-mask-image: var(--home-outline-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/home-outline.svg"));
  background-color: var(--spice-subtext) !important;
}


.main-yourLibraryX-navLink[aria-label="${p}"].active svg,
.main-globalNav-navLinkActive[aria-label="${p}"] svg {
  path {
display: none !important;
  }

  mask-image: var(--home-filled-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/home-filled.svg"));
  -webkit-mask-image: var(--home-filled-icon, url("https://sanooj.is-a.dev/Spicetify-Lucid/assets/icons/home-filled.svg"));
  background-color: var(--spice-text) !important;
}

.main-yourLibraryX-navLink[aria-label="${p}"].active svg {
  path {
display: none !important;
  }

  background-color: var(--spice-accent) !important;
}

#context-menu ul[aria-label*="Add to playlist menu"] {
  p {
max-width: 10rem;
  }
}
`}})(),(()=>{let e=document.getElementById("lucid-background-style");e||((e=document.createElement("style")).id="lucid-background-style",document.head.appendChild(e));var t=document.querySelector("#lyrics-cinema"),t=(t&&ca(t,"#lyrics-cinema .lyrics-lyrics-background, #lyrics-cinema .lyrics-lyrics-container",e,6),document.querySelector("#main .Root > div:last-child"));t&&ca(t,'.Root div[data-testid="fullscreen-mode-container"], .Root .npv-main-container',e,15)})()},[]),B.default.createElement(B.default.Fragment,null,B.default.createElement("div",{id:"state"},B.default.createElement(la,null)),B.default.createElement("div",{id:"background-container",className:"background-container",style:{containerType:"normal"}},B.default.createElement(yt,null)),B.default.createElement(Qe,null,B.default.createElement("div",{id:"modal-container",className:"modal-container",style:{containerType:"normal"}},B.default.createElement(ot,null))),B.default.createElement("div",null),B.default.createElement(we,null))),da=e(r()),pa=async function(){try{for(;!(null!=Spicetify&&Spicetify.showNotification&&null!=Spicetify&&Spicetify.Player&&null!=Spicetify&&Spicetify.React&&null!=Spicetify&&Spicetify.Platform);)await new Promise(e=>setTimeout(e,100));let e=document.getElementById("lucid-main");var t;e||((e=document.createElement("div")).id="lucid-main",null!=(t=document.getElementById("main"))&&t.prepend(e)),e&&!e.hasChildNodes()&&Spicetify.ReactDOM.createRoot(e).render(da.default.createElement(ua,null)),console.log("%c Lucid ignited! ","font-weight: bold; font-size: 1.25rem; color: #2196F3; padding: 0.5rem 0;")}catch(e){Spicetify.showNotification("[Lucid] Error Occurred: "+(e instanceof Error?e.message:e),!0),E(e)}};(async()=>{await pa()})()})();